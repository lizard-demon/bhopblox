# BhopBlox - 3D Voxel World Platform

A Reddit-native 3D voxel world platform that combines competitive speedrunning with community world creation, featuring WebAssembly-powered 3D engine, live leaderboards, world remixing system, build mode for world creation, and an authentic Minecraft-style interface with generative windchime audio.

**Current Status**: Complete dual-mode 3D voxel world platform with WebAssembly engine supporting both competitive speedrun gameplay and creative build mode, featuring community leaderboards, world publishing system, auto-save functionality, and immersive audio experience.

## What is This Platform?

BhopBlox is a comprehensive dual-mode 3D voxel world platform that runs natively within Reddit posts. Players can experience two distinct modes:

1. **Speedrun Mode**: Compete in "Voxel World Adventure" - a 3D voxel environment where players race for the fastest completion times on live community leaderboards (current record: lizrd_demon at 42.5 seconds)

2. **Build Mode**: Create and edit custom 3D voxel worlds with full creative control, auto-save functionality, and the ability to publish them as new Reddit posts for the community to play and compete on

**Core Experience**: Navigate through 3D voxel worlds, compete for speedrun records, create and modify custom worlds with integrated editing tools, auto-save your progress, publish worlds with custom titles and descriptions, and share your creations with the Reddit community through automatic post generation.

The platform currently features:

### Core Features
- **‚ö° Dual-Mode 3D Voxel Engine**: WebAssembly-powered 3D voxel worlds supporting both competitive speedrun gameplay and creative build mode with full world editing capabilities and auto-save functionality
- **üèÜ Live Community Leaderboards**: Real-time competitive leaderboard system featuring current top speedrunners: lizrd_demon (42.5s), TestPlayer123 (50.17s), borg23 (58.2s), and okpineapple12 (61.7s)
- **üî® Build Mode & World Creation**: Complete world creation system allowing users to design, edit, and save custom 3D voxel worlds with real-time map data persistence and automatic saving on exit
- **üé® World Publishing System**: Transform build mode creations into public speedrun challenges by publishing them as new Reddit posts with custom titles and descriptions
- **üîÑ World Remixing**: Create derivative versions of existing worlds with personalized branding while preserving the core 3D voxel gameplay mechanics
- **üíæ Auto-Save System**: Automatic saving of build mode progress with map data persistence and auto-save on exit to prevent data loss
- **üß± Authentic Minecraft Interface**: Complete pixelated block aesthetic with dirt/grass backgrounds, stone panels, and "Press Start 2P" pixel font that recreates the classic Minecraft look and feel
- **üéµ Generative Windchime Audio**: Sophisticated procedural audio system with ambient windchime music using extended pentatonic scales, plus contextual sound effects for all interactions
- **üì± Reddit Native Gaming**: Seamlessly integrated Reddit gaming experience - no downloads required, runs directly in posts with automatic user authentication and social features
- **üîÑ Cross-Platform Optimized**: Responsive design optimized for both desktop and mobile browsers with touch-friendly controls and adaptive canvas sizing up to 1000x650px
- **üóÇÔ∏è Dynamic World Loading**: Real-time loading of world metadata, player information, and encoded 3D voxel terrain data into the WebAssembly engine's virtual filesystem

### Current Platform State
BhopBlox is a **complete dual-mode 3D voxel world platform** with full functionality powered by a WebAssembly 3D engine. Players can either compete in speedrun mode through "Voxel World Adventure" or create custom worlds in build mode with integrated editing tools and auto-save functionality. The platform features automatic time tracking, live leaderboard updates, world creation tools with real-time saving, publishing system, world remixing capabilities, creator-only access controls, and immersive generative windchime audio. The WebAssembly 3D engine (voxels.wasm + voxels.js) loads successfully with dynamic world data integration and supports both competitive gameplay and creative world building modes.

## What Makes This Platform Innovative?

BhopBlox represents an innovative approach to social gaming and user-generated content, combining WebAssembly 3D technology with Reddit's social platform to create the first comprehensive 3D voxel world creation and speedrun platform that runs directly within Reddit posts.

**Key Innovation**: This is the first dual-mode 3D voxel platform that runs natively within Reddit posts, featuring both competitive speedrun gameplay and complete world creation tools, with live community leaderboards, precision timing systems, build mode editing, world publishing, community-driven remixing, and authentic Minecraft-style aesthetics, all powered by a WebAssembly 3D engine with social integration.

### Key Innovations

#### üöÄ **Reddit-Native 3D Voxel Platform**
- **WebAssembly 3D Engine**: Complete WASM-powered 3D voxel engine (voxels.wasm + voxels.js) with real 3D navigation, rendering, and world editing capabilities
- **Seamless Integration**: Loads 3D voxel world data, player state, leaderboard information, and build mode tools directly into the browser without external downloads
- **Social Gaming Platform**: A fully functional 3D voxel world creation and speedrun platform that runs natively within Reddit's social media platform
- **Cross-Platform 3D**: 3D rendering and world editing optimized for both desktop and mobile browsers with responsive canvas sizing

#### üèÜ **Competitive Speedrun System**
- **Live Community Leaderboards**: Real-time competitive leaderboards with current world records (lizrd_demon: 42.5s, TestPlayer123: 50.17s, borg23: 58.2s, okpineapple12: 61.7s)
- **Precision Timing**: Advanced timing system with automatic submission and ranking of completion times
- **Community Competition**: Challenge other Reddit users to beat your times and climb the global leaderboards
- **Rank Tracking**: See your position among all players with visual highlighting of your personal records

#### üî® **Complete World Creation System**
- **Build Mode**: Full 3D voxel world editor allowing users to create, modify, and save custom worlds with real-time map data persistence and auto-save functionality
- **Creator Access Control**: Only world creators can access build mode until they choose to publish their worlds publicly
- **Auto-Save System**: Automatic saving of build progress with map data persistence and auto-save on exit to prevent data loss
- **World Publishing**: Transform build mode creations into public speedrun challenges by publishing them as new Reddit posts with custom titles and descriptions
- **Creative Remix System**: Create derivative versions of existing worlds with custom titles and descriptions while preserving core gameplay
- **Instant Sharing**: Both published and remixed worlds automatically become new Reddit posts for immediate community discovery
- **User-Generated Content**: Expand the platform's content through community creativity, world building, and sharing
- **Social Discovery**: Browse and play worlds created by other community members

#### ‚ö° **Dual-Mode 3D Voxel Engine**
- **WebAssembly Performance**: Complete WASM 3D voxel engine with real-time 3D navigation, world editing, dynamic loading, memory management, and cleanup systems
- **Mode-Specific Functionality**: Supports both speedrun gameplay with precision timing and build mode with world creation tools, map saving, and auto-save on exit
- **Creator Access Control**: Build mode restricted to world creators until they choose to publish their worlds publicly
- **World Data Integration**: Loads encoded 3D voxel terrain data (world.dat), player information, leaderboard data, and build mode state into the engine's virtual filesystem
- **Auto-Save Integration**: Automatic map data saving during build mode with callback system integration and exit auto-save functionality
- **Responsive 3D Canvas**: Adaptive canvas sizing (up to 1000x650px) with authentic 3D voxel rendering and Minecraft-style frame
- **Mobile-Optimized**: Performance optimization for mobile 3D gaming and world building with touch-friendly controls

#### üéµ **Immersive Generative Audio**
- **Procedural Windchime Music**: Sophisticated ambient music system with bell-like tones using extended pentatonic scales and harmonic ratios
- **Interactive Sound Design**: Contextual audio feedback for all game interactions using professional Web Audio API with multiple oscillators and filters
- **Atmospheric Immersion**: Generative windchime soundscapes that evolve naturally with random timing and harmonic progressions
- **Professional Audio Architecture**: Separate gain nodes for ambient music and sound effects with master volume control and automatic initialization

#### ü§ù **Social Gaming & Creation Platform**
- **Reddit-Native Experience**: Complete 3D gaming and world creation experience that runs entirely within Reddit posts with automatic user authentication
- **Community Leaderboards**: Competitive features with social engagement and achievement sharing across user-created worlds
- **Creator Recognition**: World creators are credited and can control access to their build mode worlds before publishing
- **Instant Play & Create**: No downloads, installations, or external accounts required - just click to play voxel adventures or create new worlds
- **Mobile-First Design**: Optimized for Reddit's mobile-heavy user base with responsive controls for both gameplay and world building

## How to Use the Platform

### Getting Started
1. **Find BhopBlox**: Look for BhopBlox posts in your Reddit feed or visit the development subreddit
2. **Launch the Platform**: Click the "Play" button on the splash screen when you see a BhopBlox post
3. **Choose Your Mode**: 
   - **Speedrun Mode**: Click "PLAY" to compete in existing worlds
   - **Build Mode**: Click "BUILD" to create and edit worlds (creator-only until published)
4. **Compete, Create & Share**: Set speedrun records, build custom worlds, publish creations, and remix existing worlds

### Current Implementation
The platform currently features:
- **Main Interface**: Minecraft-style interface showing world information, leaderboards, and mode-specific controls with authentic block textures
- **Dual-Mode 3D Engine**: WebAssembly voxel engine (voxels.wasm + voxels.js) that loads for both speedrun gameplay and world building
- **Audio System**: Generative windchime music with interactive sound effects using Web Audio API
- **World Data Management**: Dynamic loading of player information, leaderboard data, encoded voxel terrain (world.dat), and build mode state
- **Canvas Display**: 3D rendering canvas with responsive sizing and Minecraft-style pixelated frame supporting both gameplay and editing
- **Mode Controls**: Different button layouts and functionality based on speedrun vs build mode
- **Navigation**: ESC key or "‚óÄ EXIT" button to return to main menu, plus mode-specific controls like "üöÄ Publish World" in build mode

### What Makes This Platform Unique

**üöÄ First Reddit-Native 3D Creation Platform**: The first complete 3D voxel world creation and gaming platform to run natively within Reddit posts, bringing both competitive gaming and creative tools to social media.

**üî® Integrated Build & Play System**: Seamlessly switch between creating custom 3D voxel worlds and competing in speedrun challenges, all within the same platform.

**üèÜ Community-Driven Competition**: Real-time leaderboards with precision timing across user-generated worlds - compete to beat records like the current 42.5 seconds.

**üé® Social World Publishing**: Transform private build mode creations into public speedrun challenges with custom branding, automatically posted as new Reddit experiences.

**‚ö° WebAssembly 3D Performance**: High-performance 3D voxel engine powered by WebAssembly technology supporting both smooth gameplay and responsive world editing on any device.

**üì± Social Gaming & Creation Revolution**: The first comprehensive 3D platform that runs entirely within Reddit posts, enabling instant community engagement, social competition, and collaborative world building.

### Step-by-Step Platform Instructions

#### 1. Access the Platform
- Open a BhopBlox post on Reddit and click the "Play" button on the splash screen
- View the main interface with authentic Minecraft-style design showing world information
- The interface adapts based on the world mode:
  - **Speedrun Mode**: Shows live community leaderboard with current records and "üé® Remix World" button
  - **Build Mode**: Shows build mode indicator, creator-only access controls, and "üöÄ Publish World" button (creator only)
- Experience the generative windchime audio system that activates automatically on your first interaction

#### 2. Enter the 3D Voxel World
- **Speedrun Mode**: Click "PLAY" to launch the WebAssembly 3D engine and begin your speedrun attempt
- **Build Mode**: Click "BUILD" to enter world creation mode (creator-only access until published)
- Watch real-time loading status: "Loading engine..." ‚Üí "Ready"
- The 3D voxel world loads with your player data, mode-specific functionality, and encoded terrain data (world.dat)
- Build mode includes auto-save functionality that automatically saves your progress and saves on exit
- Ambient windchime music begins playing with procedural bell-like tones and random harmonic progressions

#### 3. Navigate & Interact with the 3D Voxel Environment
- Experience full 3D navigation through the voxel world displayed in a responsive canvas (up to 1000x650px)
- **Speedrun Mode**: 
  - Use standard movement controls to navigate through the 3D environment
  - Learn the world layout and find the optimal speedrun path to achieve the fastest completion time
  - Your completion time is automatically tracked and submitted to the community leaderboard via the score callback system
- **Build Mode**:
  - Use world editing tools to modify the 3D voxel environment
  - Create custom terrain, structures, and gameplay elements
  - Your changes are automatically saved via the map save callback system

#### 4. Compete or Create
- **Speedrun Mode**:
  - Complete speedrun attempts as fast as possible to climb the community leaderboard
  - Your best times are automatically submitted and ranked against other Reddit users
  - Challenge current world records like the 42.5 seconds held by lizrd_demon
  - See your rank highlighted in the leaderboard display with visual indicators for personal records
- **Build Mode**:
  - Design and modify the 3D voxel world using the integrated editing tools
  - Your changes are automatically saved via the map save callback system
  - Auto-save functionality preserves your work and saves automatically when you exit
  - Only you can access your build mode world until you choose to publish it
  - Use the "üöÄ Publish World" button to make your creation public

#### 5. Share Your Creations
- **Publish from Build Mode**: Click the "üöÄ Publish World" button while in build mode to make your creation public
  - Add a custom title and description for your world
  - Your published world becomes a new Reddit post with its own leaderboard
  - Other players can compete on your custom speedrun challenge
- **Remix Existing Worlds**: Click the "üé® Remix World" button in speedrun mode to create variations
  - Customize the world title and description while keeping the same 3D voxel data
  - Your remixed world automatically becomes a new Reddit post with its own leaderboard
  - Create personalized versions of popular worlds for the community to discover and compete on

### Current Platform Experience
BhopBlox provides a **complete dual-mode 3D voxel world creation and speedrun platform** with full WebAssembly-powered functionality:

1. **üöÄ Dual-Mode 3D Engine** - Experience both competitive speedrun gameplay and creative world building with WebAssembly-powered voxel engine and real-time rendering
2. **üèÜ Live Competition** - Compete for fastest completion times on real-time community leaderboards across user-created worlds with automatic time tracking and ranking
3. **üî® World Creation** - Build custom 3D voxel worlds in build mode with real-time editing tools, automatic map data persistence, and auto-save on exit
4. **üé® Publishing & Remixing** - Transform build mode creations into public speedrun challenges or create variations of existing worlds that become new Reddit posts
5. **üíæ Auto-Save System** - Automatic saving of build progress with map data persistence and auto-save functionality when exiting build mode
6. **üéµ Immersive Audio** - Focus with generative windchime music featuring procedural bell-like tones, harmonic progressions, and interactive sound effects
7. **üéÆ Seamless Controls** - Navigate and edit 3D worlds with standard controls, mode-specific interfaces, exit with ESC key, and enjoy automatic engine cleanup and memory management

### The Minecraft-Style Block Interface

BhopBlox presents itself as an authentic Minecraft-style interface with complete block world aesthetics:

#### Block World Visual Elements
- **Authentic Block Background**: Complete Minecraft-style dirt/grass background with repeating 16x16 block patterns and overlay grid
- **Stone Panel Interface**: Elegant stone-textured panels with authentic Minecraft block borders (white top/left, dark bottom/right)
- **Pixelated Rendering**: All elements use `image-rendering: pixelated` for authentic blocky appearance
- **Block Typography**: Courier New monospace fonts with pixelated text shadows for authentic game styling
- **Minecraft Color Palette**: Yellow/green glowing title text, bright green selection highlights, authentic block colors

#### Main Interface Elements
- **Title Display**: "VOXEL WORLD" title with yellow "VOXEL" and green "WORLD" text, both with glowing effects
- **World Selection**: "‚ó¶ SELECT DIMENSION ‚ó¶" header with diamond symbols (‚óÜ) and yellow glow effects
- **World Browser**: Scrollable stone-textured panel with wood-textured interior for world selection
- **Initialize Button**: "INITIALIZE WORLD" button with authentic Minecraft stone button styling and press effects
- **System Status**: "‚óè SYSTEM READY" indicator with animated green status dot and block-style text

### Step-by-Step Instructions

#### 1. View the Speedrun Challenge
- **World Information Panel**: Displays "Voxel World Adventure" with description and author information
- **Live Leaderboard Display**: Shows current top 5 speedrun times with player rankings, completion times, and visual highlighting for your personal records
- **Competition Overview**: View the current world record (42.5s by lizrd_demon) and see where you rank among all players

#### 2. Launch the Speedrun Challenge
- **Launch Button**: Click "PLAY" to start the WebAssembly 3D engine and begin your speedrun attempt
- **Audio Feedback**: Button interactions trigger windchime-like tones and musical progressions for immersion
- **World Data Loading**: The game automatically loads current world data, player information, and live leaderboard standings
- **Engine Initialization**: WebAssembly voxel engine (voxels.wasm + voxels.js) loads with world data integration and timing systems

#### 3. Experience the 3D Voxel Engine
- **Engine Loading Process**: Watch real-time status updates from "Loading world data..." to "Loading engine..." to "Ready"
- **Canvas Display**: 3D voxel engine canvas appears with authentic Minecraft-style pixelated block frame and responsive sizing (up to 1000x650px with 16:9 aspect ratio)
- **World Data Integration**: Engine successfully loads world data containing player information, leaderboard scores, and encoded voxel terrain data into the WebAssembly virtual filesystem
- **Audio Enhancement**: Sophisticated generative windchime music begins with bell-like tones, creating an immersive speedrunning atmosphere

#### Available Speedrun Challenge
The game features one competitive 3D voxel speedrun world:

- **"Voxel World Adventure"** - A precision-designed 3D voxel world optimized for competitive speedrunning
- **"Explore and master this 3D voxel world"** - Navigate through the 3D environment to achieve the fastest completion time and climb the leaderboards
- **Live Community Leaderboard** with current speedrun records:
  - ü•á lizrd_demon: 42.5 seconds (World Record)
  - ü•à TestPlayer123: 50.17 seconds
  - ü•â borg23: 58.2 seconds
  - 4th okpineapple12: 61.7 seconds

#### Competitive Features
- **3D Voxel Speedrunning**: Complete WebAssembly-powered 3D world with precision timing and competitive mechanics
- **Live Leaderboards**: Real-time community speedrun competition with automatic time tracking and ranking
- **World Remixing System**: Create and share custom speedrun challenges with the community
- **Social Competition**: Challenge other Reddit users and compete for world records and leaderboard positions
- **Cross-Platform Gaming**: Optimized 3D speedrun gameplay for both desktop and mobile Reddit users

### Game States & Navigation

#### 1. Main Interface (Minecraft-Style Design)
- **Authentic Block Interface**: Complete Minecraft-style interface with dirt/grass backgrounds, stone panel styling, and pixelated rendering
- **Mode-Adaptive Display**: Interface changes based on world mode:
  - **Speedrun Mode**: Shows world info, live leaderboard with player rankings, and "üé® Remix World" button
  - **Build Mode**: Shows world info, build mode indicator, and creator-only access controls
- **Action Buttons**: Mode-specific buttons:
  - **Speedrun**: "PLAY" button to launch competitive gameplay
  - **Build**: "BUILD" button to enter world creation mode (creator-only until published)
- **Focused Block Design**: Clean interface design with authentic Minecraft block textures and typography
- **Comprehensive Audio**: Hover sounds, button clicks, and ambient windchime music for immersion

#### 2. Engine Loading State (WebAssembly Initialization)
- **Real-Time Status Updates**: Live feedback during WebAssembly voxel engine loading process
  - "Loading engine..." - WASM files (voxels.js, voxels.wasm) are being downloaded and initialized
  - "Ready" - Voxel engine successfully loaded and initialized
  - "Failed to load engine" - Error occurred during initialization with automatic fallback to main interface
- **Button State Management**: Play button is disabled during engine loading to prevent multiple initialization attempts
- **Canvas Preparation**: Game canvas appears with Minecraft-style block background and responsive sizing (up to 1000x650px)
- **Loading Animation**: CSS-based loading effects on canvas during engine initialization

#### 3. Engine State (3D Voxel Mode)
- **WebAssembly Engine Canvas**: Full canvas display with responsive sizing (up to 1000x650px) and Minecraft-style block frame for 3D voxel gameplay and world editing
- **WASM Module Integration**: WebAssembly module (voxels.wasm) with JavaScript bridge (voxels.js) loaded and initialized successfully with mode-specific functionality
- **Canvas Interface**: HTML5 canvas element with authentic Minecraft-style block borders and background for 3D rendering and editing
- **World Data Integration**: state.json file automatically loaded into Emscripten virtual filesystem with player info, mode state, leaderboard, and voxel terrain data
- **Mode-Specific Controls**: 
  - **Speedrun Mode**: "‚óÄ EXIT" button and ESC key for instant return to main interface
  - **Build Mode**: "‚óÄ EXIT" button, "üöÄ Publish World" button (creator-only), and ESC key
- **Enhanced Audio**: Generative ambient music with evolving harmonic layers and multiple musical scales during both gameplay and world building

### Engine Controls & Navigation

The WebAssembly voxel engine system provides the infrastructure for world interaction:

#### Current Engine Capabilities
- **Dual-Mode WebAssembly Voxel Engine**: Complete pre-compiled 3D voxel engine (voxels.wasm + voxels.js) with full 3D navigation, real-time voxel rendering, and world editing capabilities
- **Canvas Display System**: Functional 3D rendering canvas with authentic Minecraft-style block frame and responsive sizing supporting both gameplay and editing
- **Engine Status Tracking**: Real-time status updates ("Loading engine...", "Ready") with comprehensive error handling and user feedback
- **Memory Management**: Proper WASM memory allocation, Emscripten filesystem integration, and cleanup management for reliable 3D operations
- **World Data Integration**: Successfully loads dynamic world data containing player information, mode state, leaderboard, and encoded voxel terrain (world.dat) into the virtual filesystem
- **Mode-Specific Systems**: 
  - **Speedrun Mode**: 3D movement controls, timing systems, and score callback integration for leaderboard submission
  - **Build Mode**: World editing tools, map modification capabilities, and save callback integration for persistent world changes

#### Navigation Controls
- **ESC Key**: Press Escape at any time to immediately return to the main interface
- **Exit Button**: Click the "‚óÄ EXIT" button in the top-right corner of the canvas frame
- **Seamless Transitions**: Smooth transitions between engine mode and main interface with proper cleanup
- **Engine Cleanup**: Automatically cleans up WebAssembly resources when exiting to prevent memory leaks
- **Audio Transitions**: Ambient music starts when entering engine state, stops when exiting with descending windchime sweep

#### Debug & Maintenance
- **Automatic Cleanup**: Engine automatically cleans up resources when exiting to prevent memory leaks
- **Error Recovery**: Graceful fallback to main interface if engine loading fails with user-friendly error messages
- **Module Management**: Proper cleanup of global Module object and script tags between sessions

### Quick Start Summary

1. **Access the platform** from a Reddit post by clicking "Play" on the splash screen
2. **Choose your mode** through the authentic Minecraft-style interface:
   - **Speedrun Mode**: View leaderboards and compete for records
   - **Build Mode**: Create and edit custom 3D voxel worlds (creator-only until published)
3. **Enter the 3D world**:
   - **Click "PLAY"** for speedrun challenges with real-time loading status
   - **Click "BUILD"** for world creation and editing (if you're the creator)
4. **Engage with the platform**:
   - **Speedrun**: Master the 3D voxel environment to achieve fastest completion times and climb leaderboards
   - **Build**: Design custom worlds with integrated editing tools and automatic saving
5. **Share your creations**:
   - **Publish worlds** from build mode using "üöÄ Publish World" to create new public speedrun challenges
   - **Create remixes** by clicking "üé® Remix World" to share custom variations with the Reddit community
6. **Navigate easily** with ESC key or "‚óÄ EXIT" button to return to the main menu and view updated content

**Note**: BhopBlox is a complete 3D voxel world creation and speedrun platform - the WebAssembly 3D engine (voxels.wasm + voxels.js) loads successfully and provides full 3D navigation, world editing, precision timing mechanics, automatic leaderboard submission, map data persistence, and community-driven world sharing for both competitive gameplay and creative world building.

### Audio Experience

The game features a sophisticated generative windchime audio system powered by Web Audio API with professional-grade audio processing:
- **Interactive Sound Effects**: Button hovers, clicks, game start/exit, and transitions all have unique bell-like audio feedback using multiple oscillators and harmonic ratios
- **Generative Windchime Music**: Advanced procedural windchime soundscapes with bell-like tones in higher registers (C5 base frequency), multiple harmonics, biquad filters, and evolving harmonic progressions
- **Extended Pentatonic Scales**: Music uses extended pentatonic scales [0, 2, 4, 7, 9, 12, 14, 16] for authentic windchime bell-like quality with random timing (2-8 second intervals) and occasional harmonic chords
- **Layered Audio Architecture**: Professional audio setup with separate gain nodes for ambient windchime music and sound effects, master volume control, and proper audio context management
- **Automatic Initialization**: Audio system activates on your first user interaction (click, keydown, touchstart) to comply with browser autoplay policies and provides seamless audio throughout gameplay
- **Bell-Like Harmonics**: Uses authentic bell harmonic ratios [1, 2.76, 5.4, 8.93] with high-pass filtering for brightness and natural decay envelopes

### Troubleshooting

#### Common Issues
- **Engine Loading Failed**: The game will automatically return to the block interface - try selecting a world again
- **No Audio**: Audio activates on your first interaction - click anywhere to enable sound
- **Canvas Issues**: Press 'R' key to force reload the WebAssembly voxel engine if needed

#### Browser Requirements
- **Modern Browser**: Chrome, Firefox, Safari, or Edge with WebAssembly support
- **JavaScript Enabled**: Required for engine loading and Reddit integration
- **Audio Support**: Web Audio API support for generative music system

### Pro Tips for Platform Success

#### Speedrun Mode Tips
- **Study the Competition**: Current world record is 42.5 seconds by lizrd_demon - analyze the leaderboard to understand what times you need to beat
- **Master 3D Navigation**: Learn the 3D voxel world thoroughly to find the optimal speedrun path and eliminate wasted movement in 3D space
- **Track Your Progress**: Watch your rank change in the leaderboard as you improve - your personal records are highlighted for easy tracking
- **Focus with Audio**: The generative windchime music system enhances concentration and creates an atmospheric 3D speedrun experience

#### Build Mode Tips
- **Plan Your Design**: Think about both aesthetics and gameplay flow when creating worlds - consider how speedrunners will navigate your creation
- **Auto-Save Advantage**: Your changes are automatically saved via the callback system, and the platform auto-saves when you exit build mode
- **Test Before Publishing**: Make sure your world is completable and provides a good speedrun challenge before using "üöÄ Publish World"
- **Creator Control**: Only you can access your build mode worlds until you choose to publish them - take your time to perfect your creation
- **Safe Editing**: The auto-save system ensures your work is preserved even if you accidentally exit or encounter issues

#### Community & Sharing Tips
- **Create Practice Worlds**: Use the remix feature to create custom practice versions with modified titles and descriptions for targeted training
- **Share Your Challenges**: Both published and remixed worlds automatically create new Reddit posts with their own leaderboards for community competition
- **Engage with Creators**: Try worlds made by other community members and compete on their custom speedrun challenges

#### Technical Tips
- **Optimize Your Platform**: Desktop provides optimal 3D performance for both speedrunning and world building, though mobile functionality is fully supported
- **Quick Menu Access**: Use ESC key to quickly return to the main menu and check updated leaderboard standings or switch between modes
- **Engine Troubleshooting**: Press 'R' key while in the 3D world to force reload the WebAssembly engine if needed
- **Perfect Your Skills**: The precision timing system tracks your improvement over multiple attempts - master both 3D navigation and world building tools

## Technical Architecture

### Frontend Technologies
- **TypeScript**: Type-safe client-side development with strict typing and shared API types (`InitResponse`, `GetEntriesResponse`, `DatabaseEntry`)
- **Vite**: Lightning-fast build system and development server with hot module replacement and watch mode for both client and server
- **HTML5 Canvas**: Voxel graphics rendering within responsive pixelated frame (90vw √ó 75vh, max 1000x650px with 16:9 aspect ratio)
- **Dynamic Module Loading**: WebAssembly voxel engine loaded on-demand with cleanup and force reload capabilities for optimal performance and memory usage
- **CSS3**: Complete Minecraft-style pixelated block interface with authentic dirt/grass backgrounds, stone textures, and image-rendering: pixelated effects
- **Web Audio API**: Advanced generative audio system with procedural ambient music, oscillators, filters, LFO modulation across multiple musical scales and interactive sound effects
- **Google Fonts**: "Press Start 2P" pixel font for authentic retro gaming typography, plus Orbitron and Exo 2 for additional styling

### WebAssembly Voxel Engine
- **WASM Architecture**: Complete WebAssembly 3D voxel engine infrastructure
  - **voxels.wasm**: Compiled WebAssembly 3D voxel engine module with full 3D navigation and rendering capabilities
  - **voxels.js**: JavaScript bridge and loader for WASM integration with Emscripten Module system
  - **world.dat**: Binary voxel world data file containing encoded 3D terrain data
- **Dynamic Loading**: WASM 3D voxel engine loaded on-demand only when user clicks "PLAY" with proper script injection, initialization, and cleanup
- **Canvas Integration**: Full 3D rendering to HTML5 canvas element with authentic Minecraft-style frame (responsive sizing up to 1000x650px)
- **Module System**: Uses Emscripten global `Module` object with postRun callbacks, onAbort error handling, runtime initialization, and virtual filesystem integration
- **World Data Integration**: Dynamically creates state.json with player info, leaderboard data, and map data, then loads into Emscripten virtual filesystem via preRun
- **Score Integration**: Engine communicates completion times back to client via `_setScoreCallback` for automatic leaderboard submission
- **Memory Management**: Proper WASM memory allocation, cleanup between sessions, and comprehensive resource management
- **Engine State Management**: Real-time loading state tracking, graceful failure handling, and user feedback through the Minecraft-style interface

### Backend & Infrastructure
- **Express.js**: RESTful API server with `/api/init` and `/api/entries` endpoints plus internal Reddit integration endpoints
- **Redis Database**: Persistent world database using Redis sorted sets (`voxel_entries`) and hash maps (`entry:world_*`) with automatic initialization
- **World Management**: 6 pre-loaded worlds (Crystal Cave, Sky Islands, Ocean Mining, Volcano Base, Ice Palace, Desert Oasis) with metadata including titles, descriptions, authors, and creation timestamps
- **Devvit Platform**: Reddit's official developer platform (@devvit/web) for hosting, authentication, and Reddit API integration
- **Node.js**: Modern JavaScript runtime with automatic post creation, user authentication, and Redis operations
- **Auto-Installation**: Automatic post creation on app install with manual creation option for moderators

### Reddit Integration & Data Persistence
- **User Authentication**: Automatic Reddit user recognition via `/api/init` endpoint with personalized greeting in block interface
- **World Database**: `/api/entries` endpoint serves world metadata from Redis with proper error handling
- **Persistent Storage**: World data persists across sessions using Redis infrastructure with sorted sets for ordering
- **Post Integration**: Runs directly within Reddit posts as webview content with full Minecraft-style block interface
- **Custom Splash Screen**: Configured splash screen with app branding and "Tap to Start" button
- **Native Experience**: No external redirects or separate websites required - fully contained within Reddit with authentic Minecraft-style interface

## Development Commands

```bash
# Start development with live Reddit integration (runs client, server, and devvit in parallel)
npm run dev

# Build optimized production bundles
npm run build

# Deploy to Reddit's platform
npm run deploy

# Publish for community review
npm run launch

# Individual component builds
npm run build:client
npm run build:server

# Type checking across all projects
npm run type-check

# Login to Devvit platform
npm run login
```

## Getting Started for Developers

### Prerequisites
- Node.js 22+ (required for Devvit platform compatibility)
- Modern browser with WebAssembly support
- Reddit account for testing

### Setup Instructions
1. Clone this repository
2. Run `npm install` to install dependencies (includes automatic build via postinstall)
3. Run `npm run dev` to start development server
4. Visit the provided Reddit playtest URL to test the game

The development server automatically creates a test subreddit (r/bhopblox_dev) where you can interact with the voxel world browser in real-time.

### WASM Files & World Database

#### Pre-compiled 3D Voxel Engine
The complete 3D voxel engine is pre-compiled and included in the project:
```bash
# WASM 3D voxel engine files are located in:
src/client/public/voxels.wasm  # Main WebAssembly 3D voxel engine (binary)
src/client/public/voxels.js    # JavaScript loader and Emscripten bridge
src/client/public/world.dat    # Binary voxel world terrain data
```

The engine loads dynamically when players click "PLAY" and integrates with the client through:
- Dynamic state.json creation with player data and leaderboard
- Score callback system for automatic leaderboard submission
- Proper cleanup and memory management between sessions Emscripten bridge
src/client/public/world.dat   # Binary 3D voxel world data file (terrain data)
src/client/public/snoo.png    # Reddit mascot asset
src/client/public/default-icon.png  # App icon
```

#### World Database Structure
The game includes a Redis-backed world database with 6 pre-loaded worlds:
```bash
# Redis data structure:
voxel_entries          # Sorted set for world ordering (by creation time, negative scores)
entry:world_1          # Hash map for each world's metadata
entry:world_2          # Contains: id, title, description, createdAt, author
# ... (world_1 through world_6)

# Sample worlds automatically initialized:
# Crystal Cave (Explorer), Sky Islands (Architect), Ocean Mining (Diver)
# Volcano Base (Scientist), Ice Palace (Builder), Desert Oasis (Survivor)
```

### Development Workflow
1. **Client Development**: Edit files in `src/client/` - changes auto-rebuild
2. **Server Development**: Edit files in `src/server/` - API endpoints auto-reload
3. **Testing**: Use the Reddit playtest URL to test in real Reddit environment
4. **WASM Updates**: Replace WASM files in `src/client/public/` if updating the engine

## Advanced Features

### World Selection & Database System
- **Redis-Backed Database**: Persistent world storage using Redis sorted sets (`voxel_entries`) and hash maps (`entry:*`)
- **6 Pre-loaded Worlds**: Diverse collection including Crystal Cave, Sky Islands, Ocean Mining, Volcano Base, Ice Palace, and Desert Oasis
- **World Metadata**: Each world includes id, title, description, author, and creation timestamp with proper data validation
- **Dynamic Loading**: World list loads from `/api/entries` endpoint on app initialization with error handling
- **Selection Interface**: Interactive world browser within stone panel interface with click-to-select and audio feedback
- **Selection Validation**: Prevents launching without world selection with clear error messaging and audio feedback
- **Scrollable Interface**: Elegant scrollable world list with wood-textured panel and custom Minecraft-style scrollbar

### Voxel World Engine Infrastructure
- **WebAssembly Foundation**: WebAssembly engine (voxels.wasm) within Minecraft-style frame, ready for future voxel content
- **Engine Infrastructure**: Foundation for future world exploration with canvas display and world data loading capabilities
- **Dynamic Loading**: WASM engine loads on-demand only when launching a selected world with proper initialization
- **Cross-Platform**: Works seamlessly on desktop and mobile browsers with responsive design
- **Canvas Rendering**: Rendering capabilities within authentic Minecraft-style block interface

### WebAssembly Voxel Engine Integration
- **WASM Voxel Engine**: Complete WebAssembly voxel engine (voxels.wasm) with full voxel rendering capabilities and memory management
- **JavaScript Bridge**: WASM loading with JavaScript bridge (voxels.js) for seamless Emscripten integration and Module system
- **Canvas Display**: HTML5 canvas element with pixelated styling, proper initialization, and responsive sizing up to 1000x650px
- **World Data Integration**: Automatic loading of state.json file containing voxel block data into Emscripten virtual filesystem with immediate memory access
- **Engine Management**: Comprehensive initialization, cleanup, error handling, and force reload capability (R key) for reliable voxel operations
- **Dynamic Script Loading**: On-demand loading of WASM voxel engine components when launching selected worlds for optimal performance
- **Engine State Management**: Real-time status tracking ("Loading engine...", "Ready") with proper error handling and cleanup between sessions
- **Module Configuration**: Uses Emscripten global `Module` object with `postRun` callbacks, `onAbort` error handling, and runtime initialization
- **Memory Management**: Proper WASM memory allocation, virtual filesystem integration, and resource cleanup for stable voxel operations
- **Canvas Integration**: Direct voxel rendering capabilities to HTML5 canvas with authentic Minecraft-style pixelated block frame

### Reddit Platform Integration
- **Devvit Platform**: Built on Reddit's official developer platform with full integration
- **Native Experience**: Runs directly within Reddit posts with no external dependencies or redirects
- **User Authentication**: Automatic Reddit user recognition via server API (`/api/init` endpoint) with personalized greeting
- **Persistent Data**: World database persists across sessions using Reddit's Redis infrastructure with proper data structure
- **Custom Splash Screen**: Engaging splash screen with app branding and "Tap to Start" call-to-action
- **Responsive Design**: Optimized for both desktop and mobile Reddit experiences with adaptive pixelated UI
- **Zero Installation**: Complete world selection and voxel gaming experience with no downloads required

### Technical Implementation
- **Express API**: RESTful `/api/init` and `/api/entries` endpoints for user authentication and dimension data with error handling
- **TypeScript**: Full type safety across client, server, and shared code with defined API types (`InitResponse`, `GetEntriesResponse`, `DatabaseEntry`)
- **Vite Build System**: Optimized builds for both client and server components with hot module replacement
- **Error Handling**: Graceful fallbacks for dimension loading and engine initialization failures with user-friendly messages and audio feedback
- **CRT Interface**: Complete retro-futuristic CRT interface with clean styling and atmospheric effects
- **Canvas Management**: Responsive canvas sizing (1000x650px max) with clean styling for voxel world display
- **Modular Architecture**: Clean separation between client (`src/client`), server (`src/server`), and shared (`src/shared`) components
- **Selection State Management**: Client-side state tracking for selected dimensions with green highlighting and dynamic button updates
- **Clean Visual Design**: Focused interface design with retro-futuristic CRT styling and atmospheric effects
- **Engine Management**: Dynamic WASM voxel loading with cleanup, force reload capability (R key), and proper memory management between sessions
- **Audio Integration**: Comprehensive audio system with generative ambient music, interactive sound effects, and multiple musical scales

The world selection system provides a curated browsing experience within an authentic Minecraft-style block interface before launching into voxel environments, delivering both discovery and interactive graphics directly within Reddit posts using modern web technologies and WebAssembly performance.

## Current Development Status

**Status**: Functional 3D voxel adventure game. The WebAssembly voxel engine infrastructure (voxels.wasm + voxels.js) is included in the project structure and loads successfully. The Minecraft-style interface, world information system, audio system, and Reddit integration are fully functional.

### What's Currently Working
- ‚úÖ **Dual-Mode WebAssembly 3D Engine**: WASM engine (voxels.wasm + voxels.js) with dynamic loading, initialization, and mode-specific functionality
- ‚úÖ **Build Mode with Auto-Save**: Complete world creation system with real-time editing tools, automatic map saving, and auto-save on exit
- ‚úÖ **Creator Access Control**: Build mode restricted to world creators until they choose to publish publicly
- ‚úÖ **World Publishing System**: Transform build mode creations into public speedrun challenges with custom titles and descriptions
- ‚úÖ **Community Leaderboards**: Leaderboard system with current top times (42.5s, 50.17s, 58.2s, 61.7s) and automatic updates
- ‚úÖ **World Remixing System**: Create custom versions of worlds with personalized titles and descriptions for community sharing
- ‚úÖ **World Data Integration**: Dynamic state.json generation with player info, leaderboard data, and voxel terrain
- ‚úÖ **Engine Memory Management**: WASM memory allocation, cleanup, and resource management between sessions
- ‚úÖ **Canvas Display System**: 3D rendering canvas with Minecraft-style pixelated frame and responsive sizing
- ‚úÖ **Minecraft-Style Interface**: Pixelated block interface with authentic styling and responsive design
- ‚úÖ **Generative Windchime Audio**: Procedural ambient music with bell-like tones and interactive sound effects
- ‚úÖ **Reddit Integration**: Reddit platform integration with post creation and user authentication
- ‚úÖ **Cross-Platform Support**: Optimized for both desktop and mobile browsers
- ‚úÖ **Social Features**: Share published and remixed worlds as new Reddit posts for community discovery
- ‚úÖ **Engine Controls**: ESC key and exit button navigation with cleanup and state management

### Technical Implementation Status
- ‚úÖ **Frontend**: Complete TypeScript client with Minecraft-style UI, audio system, and WASM integration
- ‚úÖ **Backend**: Express server with Reddit API integration, Redis database, and world management endpoints
- ‚úÖ **Database**: Redis-backed world storage with 6 pre-loaded worlds and proper data validation
- ‚úÖ **Build System**: Vite-based build system with client/server separation and TypeScript project references
- ‚úÖ **Audio**: Web Audio API implementation with generative ambient music and contextual sound effects
- ‚úÖ **WASM Integration**: WebAssembly voxel engine with JavaScript bridge and memory management

The platform provides a complete WebAssembly 3D engine infrastructure with voxel world capabilities, running natively within Reddit posts.

### Current Platform Experience

**What You Can Do Right Now:**
- **Launch Dual-Mode 3D Engine**: Experience the WebAssembly voxel engine in both speedrun and build modes with loaded world data and player state integration
- **Create and Edit Worlds**: Use build mode to create custom 3D voxel worlds with integrated editing tools and automatic saving (creator-only access)
- **Auto-Save Your Work**: Build mode automatically saves your progress and saves when you exit to prevent data loss
- **Publish Your Creations**: Use "üöÄ Publish World" to transform your build mode creations into public speedrun challenges
- **View Community Leaderboards**: See current record holders including lizrd_demon (42.5s), TestPlayer123 (50.17s), borg23 (58.2s), and okpineapple12 (61.7s)
- **Create Remix Worlds**: Use the remix system to create custom versions of worlds with your own titles and descriptions
- **Enjoy Immersive Audio**: Experience generative windchime music with procedural bell-like tones and interactive sound effects
- **Navigate with Controls**: Use ESC key or exit button to seamlessly transition between interface and engine views
- **Share Community Content**: Published and remixed worlds automatically create new Reddit posts for community discovery and engagement

**The Experience:**
The platform delivers a complete dual-mode WebAssembly 3D engine with full voxel world capabilities. When you launch a world, the WASM engine initializes with real-time status updates ("Loading engine..." ‚Üí "Ready"), dynamically generating state.json with current world data, player information, and leaderboard scores, then loading everything into the engine's virtual filesystem. The 3D canvas displays with authentic Minecraft-style pixelated frame and responsive sizing, providing complete voxel world rendering and interaction capabilities. Build mode offers full world creation with integrated editing tools, automatic saving, and auto-save on exit. The publishing system allows creators to transform their build mode worlds into public speedrun challenges, while the remix system enables custom versions of existing worlds with personalized metadata, all shared as new experiences for the Reddit community.

### What You Experience Right Now

**üé® Visual Experience:**
- Complete Minecraft-style interface with authentic block textures and pixelated rendering
- Stone-textured panels with block borders and authentic color schemes
- Dirt/grass background patterns with block grid overlays
- Responsive design that maintains block aesthetics across all devices (desktop and mobile)

**üéµ Audio Experience:**
- Generative windchime ambient music with procedural bell-like tones in extended pentatonic scales
- Interactive sound effects for button hovers, clicks, world selections, and game transitions
- Professional Web Audio API implementation with separate gain nodes for ambient and SFX
- Contextual audio feedback that enhances the voxel world atmosphere

**üåç World Information Experience:**
- View "Voxel World Adventure" with detailed description and author information
- Interactive leaderboard display showing current top times and community competition
- Visual highlighting for current user's scores when present
- Clean, organized presentation of world metadata and community achievements

**‚ö° Engine Experience:**
- WebAssembly voxel engine initialization with real-time status updates ("Loading engine..." ‚Üí "Ready")
- Canvas display with Minecraft-style block frame and responsive sizing (up to 1000x650px)
- Automatic world data loading into the engine's virtual filesystem with state.json integration
- Complete technical foundation for voxel world rendering with proper memory management

**Recent Update - Enhanced Build Mode with Auto-Save:**
The platform now features enhanced build mode functionality:
- Auto-save system that automatically saves build progress when exiting build mode
- Integrated map data persistence with callback system for real-time saving
- Creator-only access control for build mode worlds until published
- Enhanced world publishing system with custom titles and descriptions
- Streamlined engine integration with mode-specific functionality
- Dynamic state.json generation with current world data, player info, and leaderboard
- Direct loading into Emscripten virtual filesystem for immediate engine access
- Simplified cleanup and memory management with proper resource disposal

### Future Development
- üîÑ **Voxel World Content**: Implementation of interactive voxel world experiences using the established engine infrastructure
- üîÑ **Gameplay Mechanics**: Addition of specific gameplay features leveraging the WebAssembly engine capabilities
- üîÑ **Enhanced Interactions**: Expanded user interactions within the 3D voxel environment
- üîÑ **Community Features**: Additional social features building on the existing remix and leaderboard systems

---

## Summary

**BhopBlox** is a comprehensive dual-mode 3D voxel world platform that runs natively within Reddit posts. The platform currently provides:

- ‚úÖ **Dual-mode WebAssembly 3D engine** with WASM integration supporting both competitive speedrun gameplay and creative build mode
- ‚úÖ **Complete build mode system** with world creation tools, auto-save functionality, and creator-only access control
- ‚úÖ **World publishing system** for transforming build mode creations into public speedrun challenges with custom branding
- ‚úÖ **Live community leaderboards** with real-time competition tracking, ranking, and automatic time submission
- ‚úÖ **World remixing system** for creating custom variations of existing worlds with personalized titles and descriptions
- ‚úÖ **Auto-save architecture** with map data persistence and automatic saving on exit to prevent data loss
- ‚úÖ **3D canvas display system** with voxel rendering capabilities and Minecraft-style pixelated frame
- ‚úÖ **Authentic Minecraft-style interface** with pixelated styling, responsive design, and mode-adaptive displays
- ‚úÖ **Generative windchime audio** with procedural ambient music and interactive sound effects for immersive experience
- ‚úÖ **Social platform integration** with Reddit post creation for published and remixed worlds
- ‚úÖ **Cross-platform optimization** for both desktop and mobile browsers with precision controls and responsive design

BhopBlox delivers a complete dual-mode 3D voxel world platform with WebAssembly performance, creative tools, community features, and social integration within Reddit posts.
