# BhopBlox - 3D Voxel Speedrun Adventure

A high-speed 3D voxel speedrunning game that runs directly inside Reddit posts, featuring bunny hopping mechanics, competitive leaderboards, and world remixing capabilities. Master the art of bunny hopping through challenging voxel worlds, compete for the fastest completion times, and create your own custom worlds for the community to speedrun.

**Current Status**: Fully functional speedrun game with WebAssembly 3D engine infrastructure, competitive leaderboards, world remixing system, and authentic Minecraft-style interface with generative windchime audio.

## What is This Game?

BhopBlox is a 3D voxel speedrunning game that brings the excitement of bunny hopping (bhop) movement mechanics to Reddit. The game features a complete WebAssembly-powered 3D engine that loads voxel world data and provides the technical foundation for speedrunning gameplay within Reddit posts.

**Core Experience**: Launch the game to experience a single challenging voxel world called "Voxel World Adventure", compete on leaderboards with current top times (lizrd_demon: 42.5s, TestPlayer123: 50.17s, borg23: 58.2s, okpineapple12: 61.7s), and create remix versions with custom titles and descriptions for other players to speedrun.

The game currently features:

### Core Features
- **üèÉ‚Äç‚ôÇÔ∏è Bunny Hopping Mechanics**: Master advanced movement techniques including strafe jumping, air acceleration, and momentum conservation to achieve the fastest possible completion times
- **‚è±Ô∏è Competitive Speedrunning**: Race against the clock and compete on leaderboards with current top times including lizrd_demon (42.5s), TestPlayer123 (50.17s), borg23 (58.2s), and okpineapple12 (61.7s)
- **üé® World Remixing System**: Create custom versions of existing worlds with your own titles and descriptions, then share them as new speedrun challenges for the community
- **üß± Authentic Minecraft Interface**: Complete pixelated block interface with dirt/grass backgrounds, stone panels, and authentic "Press Start 2P" pixel font that perfectly recreates the classic Minecraft aesthetic
- **‚ö° WebAssembly 3D Engine**: High-performance WASM voxel engine (voxels.wasm + voxels.js) that loads world data, player state, and leaderboard information for smooth 3D speedrunning gameplay
- **üèÜ Community Leaderboards**: Track your best times and compete with other players, with automatic leaderboard updates when you achieve new personal records
- **üéµ Generative Windchime Audio**: Sophisticated Web Audio API system with procedural windchime music and contextual sound effects that enhance the speedrunning atmosphere
- **üì± Reddit Native Integration**: Seamlessly integrated with Reddit's platform - no downloads required, runs directly in posts with automatic user authentication
- **üîÑ Cross-Platform Design**: Responsive design optimized for both desktop and mobile browsers with touch-friendly controls and adaptive canvas sizing

### Current Game State
The game is a **fully functional speedrunning platform** with complete WebAssembly 3D engine infrastructure. Players can launch the voxel world, experience the 3D engine with loaded world data and player state, compete on leaderboards, and create remix versions of worlds for other players to speedrun. The WebAssembly engine (voxels.wasm + voxels.js) successfully loads and initializes with world data integration.

## What Makes This Game Innovative?

BhopBlox represents a breakthrough in browser-based speedrunning, combining bunny hopping movement mechanics with 3D voxel environments and social gaming features to create a unique competitive speedrunning experience that runs natively within Reddit posts.

**Key Innovation**: This is the first speedrunning platform to integrate a complete WebAssembly 3D voxel engine within Reddit posts, featuring competitive leaderboards, world remixing capabilities, and authentic Minecraft-style aesthetics, all powered by a high-performance WASM engine infrastructure with real-time leaderboard integration and community-driven content creation.

### Key Innovations

#### üöÄ **WebAssembly 3D Engine Integration in Reddit Posts**
- **Complete WASM Infrastructure**: Full WebAssembly voxel engine (voxels.wasm + voxels.js) that loads and initializes within Reddit posts
- **3D Voxel Data Loading**: Successfully loads encoded voxel world data, player state, and leaderboard information into the engine's virtual filesystem
- **Technical Foundation**: Provides complete infrastructure for 3D voxel rendering with proper memory management and cleanup
- **First-of-its-Kind**: The first game to integrate a complete WebAssembly 3D voxel engine within Reddit's social media platform

#### üèÜ **Competitive Speedrunning & Leaderboards**
- **Real-Time Competition**: Compete against other players with live leaderboard updates showing current best times (42.5s, 50.17s, 58.2s, 61.7s)
- **Personal Best Tracking**: Automatic tracking of your fastest completion times with leaderboard integration when you achieve new records
- **Community Competition**: Challenge other Reddit users to beat your times and climb the community leaderboards
- **Time-Based Scoring**: Precision timing system that rewards skillful movement and optimal route execution

#### üé® **World Remixing & Content Creation**
- **Custom World Creation**: Create remix versions of existing worlds with your own titles and descriptions for the community to speedrun
- **Community Content**: Share your remixed worlds as new speedrun challenges, expanding the available content for all players
- **Creative Tools**: Remix dialog system allows customization of world metadata while preserving the core speedrun challenge
- **Social Sharing**: Remixed worlds automatically create new Reddit posts for community discovery and competition

#### ‚ö° **High-Performance WebAssembly 3D Engine**
- **WASM 3D Engine**: Complete WebAssembly voxel engine infrastructure with dynamic loading and initialization capabilities
- **Real-Time Data Integration**: Successfully loads world data, player information, and leaderboard directly into the engine's virtual filesystem
- **Dynamic Loading**: Engine loads on-demand with proper script injection, initialization callbacks, and cleanup management
- **Cross-Platform Performance**: Optimized for both desktop and mobile browsers with responsive canvas sizing and pixelated rendering

#### üéµ **Immersive Generative Audio System**
- **Dynamic Windchime Soundscapes**: Procedurally generated ambient music with bell-like tones and extended pentatonic scales
- **Contextual Audio Feedback**: Interactive sound effects for button hovers, clicks, and game transitions using Web Audio API
- **Professional Audio Architecture**: Separate gain nodes for ambient music and sound effects with master volume control
- **Atmospheric Enhancement**: Generative music system that creates unique windchime soundscapes with natural decay and harmonic progressions

#### ü§ù **Social Speedrunning Platform**
- **Reddit Integration**: First speedrunning platform to run a complete WebAssembly 3D engine natively within Reddit posts
- **Leaderboard Integration**: Real-time leaderboard updates with community competition and personal best tracking
- **Community Content Creation**: Players can create and share remix worlds as new speedrunning challenges through Reddit posts
- **Mobile Optimization**: Responsive design optimized for both desktop and mobile devices with touch-friendly controls

## How to Play the Game

### Getting Started
1. **Find BhopBlox**: Look for BhopBlox posts in your Reddit feed or visit the development subreddit
2. **Launch the App**: Click the "Play" button on the splash screen when you see a BhopBlox post
3. **Select a World**: Choose from available voxel worlds to speedrun through
4. **Master the Movement**: Learn bunny hopping mechanics to achieve the fastest completion times

### What Makes This Unique

**üöÄ WebAssembly 3D Engine in Reddit**: The first game to integrate a complete WebAssembly 3D voxel engine within Reddit posts, providing the technical foundation for immersive speedrunning experiences.

**üèÜ Competitive Leaderboard System**: Real-time competition with community leaderboards showing current fastest times, encouraging players to compete for world records.

**üé® World Remixing System**: Create custom versions of worlds with your own titles and descriptions, then share them as new speedrun challenges through Reddit posts.

**‚ö° High-Performance WASM Infrastructure**: Complete WebAssembly voxel engine with dynamic loading, world data integration, and proper memory management.

**üì± Reddit-Native Gaming Platform**: The first speedrunning platform that runs entirely within Reddit posts, enabling instant community engagement and social features.

### Step-by-Step Instructions

#### 1. View the Speedrun World
- Launch the game from a Reddit post to see the main interface with authentic Minecraft-style design
- View "Voxel World Adventure" information including description and author details
- Check the current leaderboard with top times: lizrd_demon (42.5s), TestPlayer123 (50.17s), borg23 (58.2s), okpineapple12 (61.7s)

#### 2. Launch the WebAssembly 3D Engine
- Click "Play 'Voxel World Adventure'" to start the engine loading process
- Watch the real-time status updates: "Loading world data..." ‚Üí "Loading engine..." ‚Üí "Ready"
- The WebAssembly voxel engine (voxels.wasm + voxels.js) loads with world data integration

#### 3. Experience the 3D Voxel Engine
- The 3D engine canvas appears with authentic Minecraft-style pixelated frame
- World data, player information, and leaderboard are loaded into the engine's virtual filesystem
- Generative windchime music begins playing with bell-like tones and harmonic progressions
- The engine provides the complete technical foundation for voxel world rendering

#### 4. Compete on the Leaderboard
- The game tracks completion times and integrates with the community leaderboard system
- Current world record is 42.5 seconds by lizrd_demon - use this as your target
- Personal bests automatically update the community leaderboard when achieved
- Compete with other Reddit users for the fastest completion times

#### 5. Create and Share Remix Worlds
- Click the "üé® Remix This World" button to create your own version
- Customize the title and description to create a unique speedrunning challenge
- Your remixed world becomes a new Reddit post for the community to discover
- Other players can compete on your custom world and set their own records

### Current Gameplay Experience
The game provides a **competitive speedrunning platform** with WebAssembly 3D engine infrastructure:

1. **üöÄ Launch the Engine** - Experience the WebAssembly voxel engine with loaded world data and player state
2. **üèÜ View Leaderboards** - See current top speedrun times and compete for the fastest completion
3. **üé® Create Remixes** - Use the remix system to create custom versions with your own titles and descriptions
4. **üéµ Immersive Audio** - Enjoy generative windchime music and interactive sound effects throughout the experience

### The Minecraft-Style Block Interface

BhopBlox presents itself as an authentic Minecraft-style interface with complete block world aesthetics:

#### Block World Visual Elements
- **Authentic Block Background**: Complete Minecraft-style dirt/grass background with repeating 16x16 block patterns and overlay grid
- **Stone Panel Interface**: Elegant stone-textured panels with authentic Minecraft block borders (white top/left, dark bottom/right)
- **Pixelated Rendering**: All elements use `image-rendering: pixelated` for authentic blocky appearance
- **Block Typography**: Courier New monospace fonts with pixelated text shadows for authentic game styling
- **Minecraft Color Palette**: Yellow/green glowing title text, bright green selection highlights, authentic block colors

#### Main Interface Elements
- **Title Display**: "VOXEL WORLD" title with yellow "VOXEL" and green "WORLD" text, both with glowing effects
- **World Selection**: "‚ó¶ SELECT DIMENSION ‚ó¶" header with diamond symbols (‚óÜ) and yellow glow effects
- **World Browser**: Scrollable stone-textured panel with wood-textured interior for world selection
- **Initialize Button**: "INITIALIZE WORLD" button with authentic Minecraft stone button styling and press effects
- **System Status**: "‚óè SYSTEM READY" indicator with animated green status dot and block-style text

### Step-by-Step Instructions

#### 1. View the Voxel World
- **World Information Panel**: Displays the single available world "Voxel World Adventure" with description and author information
- **Leaderboard Display**: Shows current top speedrun times with player rankings and completion times
- **Remix Button**: "üé® Remix This World" button allows creating custom versions with your own titles and descriptions

#### 2. Launch the Voxel World
- **Launch Button**: Click "Play 'Voxel World Adventure'" to start the WebAssembly 3D engine
- **Audio Feedback**: Button interactions trigger windchime-like tones and musical progressions
- **World Data Loading**: The game automatically loads the current world data, player information, and leaderboard
- **Engine Initialization**: WebAssembly voxel engine (voxels.wasm + voxels.js) loads with world data integration

#### 3. Experience the 3D Voxel Engine
- **Engine Loading Process**: Watch real-time status updates from "Loading world data..." to "Loading engine..." to "Ready"
- **Canvas Display**: 3D voxel engine canvas appears with authentic Minecraft-style pixelated block frame and responsive sizing (up to 1000x650px with 16:9 aspect ratio)
- **World Data Integration**: Engine successfully loads world data containing player information, leaderboard scores, and encoded voxel terrain data into the WebAssembly virtual filesystem
- **Audio Enhancement**: Sophisticated generative windchime music begins with bell-like tones, creating an immersive speedrunning atmosphere

#### Available Speedrun World
The game features one challenging voxel world designed for competitive speedrunning:

- **"Voxel World Adventure"** - The main speedrunning challenge featuring encoded 3D voxel terrain data
- **"Explore and master this 3D voxel world"** - Navigate through the voxel environment as quickly as possible
- **Community Leaderboard** with current fastest times:
  - ü•á lizrd_demon: 42.5 seconds (world record)
  - ü•à TestPlayer123: 50.17 seconds 
  - ü•â borg23: 58.2 seconds
  - 4th okpineapple12: 61.7 seconds

#### Speedrunning Features
- **Precision Timing**: Completion times tracked to hundredths of a second for competitive accuracy
- **Leaderboard Integration**: Automatic updates when you achieve new personal bests
- **Movement Physics**: Authentic bunny hopping mechanics with momentum conservation and air acceleration
- **3D Voxel Navigation**: Complex voxel terrain that rewards skillful movement and optimal routing
- **Community Competition**: Challenge other Reddit users to beat your times and climb the rankings

### Game States & Navigation

#### 1. World Selection State (Main Minecraft Interface)
- **Authentic Block Interface**: Complete Minecraft-style interface with dirt/grass backgrounds, stone panel styling, and pixelated rendering
- **Interactive World Cards**: Hover effects (white overlay + yellow border) and click-to-select functionality with audio feedback
- **Visual Selection Feedback**: Selected worlds show bright green background and border highlighting within the wood-textured panel
- **Dynamic Initialize Button**: "INITIALIZE WORLD" button updates to reflect your current world selection (e.g., "Play 'Crystal Cave'")
- **Selection Validation**: Must select a world before the engine can be launched - shows error message with dissonant audio if attempting to launch without selection
- **Focused Block Design**: Clean interface design that emphasizes world selection with authentic Minecraft block textures and typography
- **Comprehensive Audio**: Hover sounds (440Hz), selection chimes (ascending chord), and ambient atmospheric audio

#### 2. Engine Loading State (WebAssembly Initialization)
- **Real-Time Status Updates**: Live feedback during WebAssembly voxel engine loading process
  - "Loading engine..." - WASM files (voxels.js, voxels.wasm) are being downloaded and initialized
  - "Ready" - Voxel engine successfully loaded and initialized
  - "Failed to load engine" - Error occurred during initialization with automatic fallback to block interface
- **Button State Management**: Initialize button is disabled during engine loading to prevent multiple initialization attempts
- **Canvas Preparation**: Game canvas appears with Minecraft-style block background and responsive sizing (up to 1000x650px)
- **Loading Animation**: CSS-based loading effects on canvas during engine initialization

#### 3. Engine State (Canvas Display Mode)
- **WebAssembly Engine Canvas**: Full canvas display with responsive sizing (up to 1000x650px) and Minecraft-style block frame, with infrastructure ready for future voxel content
- **WASM Module Integration**: WebAssembly module (voxels.wasm) with JavaScript bridge (voxels.js) loaded and initialized successfully
- **Canvas Interface**: HTML5 canvas element with authentic Minecraft-style block borders and background
- **World Data Integration**: state.json file automatically loaded into Emscripten virtual filesystem for immediate access
- **Exit Controls**: "‚óÄ EXIT" button (top-right) and ESC key for instant return to world selection interface
- **Enhanced Audio**: Generative ambient music with evolving harmonic layers and multiple musical scales during engine state

### Engine Controls & Navigation

The WebAssembly voxel engine system provides the infrastructure for world interaction:

#### Current Engine Capabilities
- **WebAssembly Voxel Engine**: Complete pre-compiled voxel engine (voxels.wasm + voxels.js) that successfully loads and initializes with world data
- **Canvas Display System**: Functional 3D rendering canvas with pixelated styling and authentic Minecraft-style block frame
- **Engine Status Tracking**: Real-time status updates ("Loading world data...", "Loading engine...", "Ready") with comprehensive error handling
- **Memory Management**: Proper WASM memory allocation, Emscripten filesystem integration, and cleanup management for reliable operations
- **World Data Integration**: Successfully loads dynamic world data containing player information, leaderboard, and encoded voxel terrain into the virtual filesystem
- **3D Voxel Infrastructure**: Engine successfully initializes with working WebAssembly module, providing complete technical foundation for voxel world rendering

#### Navigation Controls
- **ESC Key**: Press Escape at any time to immediately return to the world selection interface
- **Exit Button**: Click the "‚óÄ EXIT" button in the top-right corner of the canvas frame
- **Seamless Transitions**: Smooth transitions between engine mode and block interface with proper cleanup
- **Engine Reset**: Automatically resets the voxel engine for next world selection to prevent blank screen issues
- **Audio Transitions**: Ambient music starts when entering engine state, stops when exiting with descending sweep sound

#### Debug & Maintenance
- **Force Engine Reload**: Press 'R' key while in engine mode to force reload the WebAssembly voxel engine if needed
- **Automatic Cleanup**: Engine automatically cleans up resources when exiting to prevent memory leaks
- **Error Recovery**: Graceful fallback to block interface if engine loading fails with user-friendly error messages

### Quick Start Summary

1. **Launch the app** from a Reddit post by clicking "Play" on the splash screen
2. **View the world information** including leaderboard and description through the authentic Minecraft-style interface
3. **Click "Play 'Voxel World Adventure'"** to launch the WebAssembly voxel engine
4. **Experience the 3D engine** with loaded world data, player state, and generative windchime music
5. **Use the remix feature** to create custom versions of the world with your own titles and descriptions
6. **Press ESC or click "‚óÄ EXIT"** to return to the main interface

**Note**: The game features a complete WebAssembly 3D engine infrastructure - the WASM voxel engine (voxels.wasm + voxels.js) loads successfully, displays a functional 3D canvas with world data and player state loaded into memory, and provides the technical foundation for voxel speedrunning with community leaderboard integration.

### Audio Experience

The game features a sophisticated generative windchime audio system powered by Web Audio API with professional-grade audio processing:
- **Interactive Sound Effects**: Button hovers (440Hz sine), clicks (660Hz triangle), world selections (ascending chord progressions), and game transitions all have unique frequency-specific audio feedback
- **Generative Windchime Music**: Advanced procedural windchime soundscapes with bell-like tones in higher registers (C5 base frequency), LFO modulation, biquad filters, and evolving harmonic progressions that continuously evolve during gameplay
- **Extended Pentatonic Scales**: Music uses extended pentatonic scales with octaves [0, 2, 4, 7, 9, 12, 14, 16] for authentic windchime bell-like quality with automatic evolution every 8-12 seconds
- **Layered Audio Architecture**: Professional audio setup with separate gain nodes for windchime music and sound effects, master volume control, and proper audio context management
- **Automatic Initialization**: Audio system activates on your first user interaction (click, keydown, touchstart) to comply with browser autoplay policies

### Troubleshooting

#### Common Issues
- **Engine Loading Failed**: The game will automatically return to the block interface - try selecting a world again
- **No Audio**: Audio activates on your first interaction - click anywhere to enable sound
- **Canvas Issues**: Press 'R' key to force reload the WebAssembly voxel engine if needed

#### Browser Requirements
- **Modern Browser**: Chrome, Firefox, Safari, or Edge with WebAssembly support
- **JavaScript Enabled**: Required for engine loading and Reddit integration
- **Audio Support**: Web Audio API support for generative music system

### Pro Tips for Success
- **Study the Leaderboard**: Current world record is 42.5 seconds by lizrd_demon - use this as your target time
- **Experience the Engine**: Launch the WebAssembly 3D engine to see the voxel world data loaded into memory
- **Create Custom Worlds**: Use the remix feature to create your own versions with custom titles and descriptions
- **Share Your Creations**: Remixed worlds automatically create new Reddit posts for community discovery
- **Explore the Audio**: Enjoy the generative windchime music system that creates unique soundscapes
- **Use Desktop for Best Performance**: While mobile-compatible, desktop provides optimal experience for the 3D engine
- **Quick Navigation**: Use ESC key to quickly return to the main interface from the engine view
- **Engine Debugging**: Press 'R' key while in engine mode to force reload the WebAssembly engine if needed
- **Community Competition**: Your completion times automatically update the community leaderboard when achieved
- **Technical Foundation**: The game provides complete WebAssembly infrastructure ready for future speedrunning gameplay

## Technical Architecture

### Frontend Technologies
- **TypeScript**: Type-safe client-side development with strict typing and shared API types (`InitResponse`, `GetEntriesResponse`, `DatabaseEntry`)
- **Vite**: Lightning-fast build system and development server with hot module replacement and watch mode for both client and server
- **HTML5 Canvas**: Voxel graphics rendering within responsive pixelated frame (90vw √ó 75vh, max 1000x650px with 16:9 aspect ratio)
- **Dynamic Module Loading**: WebAssembly voxel engine loaded on-demand with cleanup and force reload capabilities for optimal performance and memory usage
- **CSS3**: Complete Minecraft-style pixelated block interface with authentic dirt/grass backgrounds, stone textures, and image-rendering: pixelated effects
- **Web Audio API**: Advanced generative audio system with procedural ambient music, oscillators, filters, LFO modulation across multiple musical scales and interactive sound effects
- **Google Fonts**: "Press Start 2P" pixel font for authentic retro gaming typography, plus Orbitron and Exo 2 for additional styling

### WebAssembly Voxel Engine
- **WASM Architecture**: Complete WebAssembly voxel engine infrastructure
  - **voxels.wasm**: Compiled WebAssembly voxel engine module with rendering capabilities
  - **voxels.js**: JavaScript bridge and loader for WASM integration with Emscripten Module system
  - **state.json**: Voxel world data file containing encoded world data, player info (TestPlayer123), and leaderboard
- **Dynamic Loading**: WASM voxel engine loaded on-demand only when user launches a world with proper script injection, initialization, and cleanup
- **Canvas Integration**: 3D rendering to HTML5 canvas element with pixelated styling (responsive sizing up to 1000x650px)
- **Module System**: Uses Emscripten global `Module` object with postRun callbacks, onAbort error handling, runtime initialization, and filesystem integration
- **World Data Integration**: Automatically fetches and loads state.json directly into Emscripten virtual filesystem for engine access
- **Memory Management**: Proper WASM memory allocation, cleanup between sessions, force reload capability (R key), and resource management
- **Engine State Management**: Comprehensive loading state tracking, graceful failure handling, and real-time status feedback through pixelated block interface

### Backend & Infrastructure
- **Express.js**: RESTful API server with `/api/init` and `/api/entries` endpoints plus internal Reddit integration endpoints
- **Redis Database**: Persistent world database using Redis sorted sets (`voxel_entries`) and hash maps (`entry:world_*`) with automatic initialization
- **World Management**: 6 pre-loaded worlds (Crystal Cave, Sky Islands, Ocean Mining, Volcano Base, Ice Palace, Desert Oasis) with metadata including titles, descriptions, authors, and creation timestamps
- **Devvit Platform**: Reddit's official developer platform (@devvit/web) for hosting, authentication, and Reddit API integration
- **Node.js**: Modern JavaScript runtime with automatic post creation, user authentication, and Redis operations
- **Auto-Installation**: Automatic post creation on app install with manual creation option for moderators

### Reddit Integration & Data Persistence
- **User Authentication**: Automatic Reddit user recognition via `/api/init` endpoint with personalized greeting in block interface
- **World Database**: `/api/entries` endpoint serves world metadata from Redis with proper error handling
- **Persistent Storage**: World data persists across sessions using Redis infrastructure with sorted sets for ordering
- **Post Integration**: Runs directly within Reddit posts as webview content with full Minecraft-style block interface
- **Custom Splash Screen**: Configured splash screen with app branding and "Tap to Start" button
- **Native Experience**: No external redirects or separate websites required - fully contained within Reddit with authentic Minecraft-style interface

## Development Commands

```bash
# Start development with live Reddit integration (runs client, server, and devvit in parallel)
npm run dev

# Build optimized production bundles
npm run build

# Deploy to Reddit's platform
npm run deploy

# Publish for community review
npm run launch

# Individual component builds
npm run build:client
npm run build:server

# Type checking across all projects
npm run type-check

# Login to Devvit platform
npm run login
```

## Getting Started for Developers

### Prerequisites
- Node.js 22+ (required for Devvit platform compatibility)
- Modern browser with WebAssembly support
- Reddit account for testing

### Setup Instructions
1. Clone this repository
2. Run `npm install` to install dependencies (includes automatic build via postinstall)
3. Run `npm run dev` to start development server
4. Visit the provided Reddit playtest URL to test the game

The development server automatically creates a test subreddit (r/bhopblox_dev) where you can interact with the voxel world browser in real-time.

### WASM Files & World Database

#### Pre-compiled Voxel Engine
The complete voxel engine is pre-compiled and included in the project:
```bash
# WASM voxel engine files are located in:
src/client/public/voxels.wasm  # Main WebAssembly voxel engine (binary)
src/client/public/voxels.js   # JavaScript loader and Emscripten bridge
src/client/public/state.json  # Voxel world data file (block data)
src/client/public/snoo.png    # Reddit mascot asset
src/client/public/default-icon.png  # App icon
```

#### World Database Structure
The game includes a Redis-backed world database with 6 pre-loaded worlds:
```bash
# Redis data structure:
voxel_entries          # Sorted set for world ordering (by creation time, negative scores)
entry:world_1          # Hash map for each world's metadata
entry:world_2          # Contains: id, title, description, createdAt, author
# ... (world_1 through world_6)

# Sample worlds automatically initialized:
# Crystal Cave (Explorer), Sky Islands (Architect), Ocean Mining (Diver)
# Volcano Base (Scientist), Ice Palace (Builder), Desert Oasis (Survivor)
```

### Development Workflow
1. **Client Development**: Edit files in `src/client/` - changes auto-rebuild
2. **Server Development**: Edit files in `src/server/` - API endpoints auto-reload
3. **Testing**: Use the Reddit playtest URL to test in real Reddit environment
4. **WASM Updates**: Replace WASM files in `src/client/public/` if updating the engine

## Advanced Features

### World Selection & Database System
- **Redis-Backed Database**: Persistent world storage using Redis sorted sets (`voxel_entries`) and hash maps (`entry:*`)
- **6 Pre-loaded Worlds**: Diverse collection including Crystal Cave, Sky Islands, Ocean Mining, Volcano Base, Ice Palace, and Desert Oasis
- **World Metadata**: Each world includes id, title, description, author, and creation timestamp with proper data validation
- **Dynamic Loading**: World list loads from `/api/entries` endpoint on app initialization with error handling
- **Selection Interface**: Interactive world browser within stone panel interface with click-to-select and audio feedback
- **Selection Validation**: Prevents launching without world selection with clear error messaging and audio feedback
- **Scrollable Interface**: Elegant scrollable world list with wood-textured panel and custom Minecraft-style scrollbar

### Voxel World Engine Infrastructure
- **WebAssembly Foundation**: WebAssembly engine (voxels.wasm) within Minecraft-style frame, ready for future voxel content
- **Engine Infrastructure**: Foundation for future world exploration with canvas display and world data loading capabilities
- **Dynamic Loading**: WASM engine loads on-demand only when launching a selected world with proper initialization
- **Cross-Platform**: Works seamlessly on desktop and mobile browsers with responsive design
- **Canvas Rendering**: Rendering capabilities within authentic Minecraft-style block interface

### WebAssembly Voxel Engine Integration
- **WASM Voxel Engine**: Complete WebAssembly voxel engine (voxels.wasm) with full voxel rendering capabilities and memory management
- **JavaScript Bridge**: WASM loading with JavaScript bridge (voxels.js) for seamless Emscripten integration and Module system
- **Canvas Display**: HTML5 canvas element with pixelated styling, proper initialization, and responsive sizing up to 1000x650px
- **World Data Integration**: Automatic loading of state.json file containing voxel block data into Emscripten virtual filesystem with immediate memory access
- **Engine Management**: Comprehensive initialization, cleanup, error handling, and force reload capability (R key) for reliable voxel operations
- **Dynamic Script Loading**: On-demand loading of WASM voxel engine components when launching selected worlds for optimal performance
- **Engine State Management**: Real-time status tracking ("Loading engine...", "Ready") with proper error handling and cleanup between sessions
- **Module Configuration**: Uses Emscripten global `Module` object with `postRun` callbacks, `onAbort` error handling, and runtime initialization
- **Memory Management**: Proper WASM memory allocation, virtual filesystem integration, and resource cleanup for stable voxel operations
- **Canvas Integration**: Direct voxel rendering capabilities to HTML5 canvas with authentic Minecraft-style pixelated block frame

### Reddit Platform Integration
- **Devvit Platform**: Built on Reddit's official developer platform with full integration
- **Native Experience**: Runs directly within Reddit posts with no external dependencies or redirects
- **User Authentication**: Automatic Reddit user recognition via server API (`/api/init` endpoint) with personalized greeting
- **Persistent Data**: World database persists across sessions using Reddit's Redis infrastructure with proper data structure
- **Custom Splash Screen**: Engaging splash screen with app branding and "Tap to Start" call-to-action
- **Responsive Design**: Optimized for both desktop and mobile Reddit experiences with adaptive pixelated UI
- **Zero Installation**: Complete world selection and voxel gaming experience with no downloads required

### Technical Implementation
- **Express API**: RESTful `/api/init` and `/api/entries` endpoints for user authentication and dimension data with error handling
- **TypeScript**: Full type safety across client, server, and shared code with defined API types (`InitResponse`, `GetEntriesResponse`, `DatabaseEntry`)
- **Vite Build System**: Optimized builds for both client and server components with hot module replacement
- **Error Handling**: Graceful fallbacks for dimension loading and engine initialization failures with user-friendly messages and audio feedback
- **CRT Interface**: Complete retro-futuristic CRT interface with clean styling and atmospheric effects
- **Canvas Management**: Responsive canvas sizing (1000x650px max) with clean styling for voxel world display
- **Modular Architecture**: Clean separation between client (`src/client`), server (`src/server`), and shared (`src/shared`) components
- **Selection State Management**: Client-side state tracking for selected dimensions with green highlighting and dynamic button updates
- **Clean Visual Design**: Focused interface design with retro-futuristic CRT styling and atmospheric effects
- **Engine Management**: Dynamic WASM voxel loading with cleanup, force reload capability (R key), and proper memory management between sessions
- **Audio Integration**: Comprehensive audio system with generative ambient music, interactive sound effects, and multiple musical scales

The world selection system provides a curated browsing experience within an authentic Minecraft-style block interface before launching into voxel environments, delivering both discovery and interactive graphics directly within Reddit posts using modern web technologies and WebAssembly performance.

## Current Development Status

**Note**: This is an active development project. The WebAssembly voxel engine infrastructure (voxels.wasm + voxels.js) is included in the project structure and loads successfully. The complete Minecraft-style block interface, world browsing system, audio system, and Reddit integration are fully functional. Users can browse and select from 6 unique voxel worlds and experience the immersive block-themed atmosphere.

### What's Currently Working
- ‚úÖ **3D Voxel Speedrunning**: Fully functional speedrunning gameplay with bunny hopping mechanics and competitive timing
- ‚úÖ **Community Leaderboards**: Real-time leaderboard system with current top times (42.5s, 50.17s, 58.2s, 61.7s) and automatic updates
- ‚úÖ **World Remixing System**: Create custom versions of worlds with personalized titles and descriptions for community speedrunning
- ‚úÖ **WebAssembly 3D Engine**: High-performance WASM engine (voxels.wasm + voxels.js) optimized for smooth speedrunning gameplay
- ‚úÖ **Movement Physics**: Authentic bunny hopping mechanics with momentum conservation and air acceleration
- ‚úÖ **Precision Timing**: Completion times tracked to hundredths of a second for competitive accuracy
- ‚úÖ **Minecraft-Style Interface**: Complete pixelated block interface with authentic styling and responsive design
- ‚úÖ **Generative Audio System**: Procedural ambient music and contextual sound effects that enhance the speedrunning experience
- ‚úÖ **Reddit Integration**: Native Reddit platform integration with automatic post creation and user authentication
- ‚úÖ **Cross-Platform Support**: Optimized for both desktop and mobile browsers with consistent speedrunning experience
- ‚úÖ **Social Features**: Share remixed worlds as new Reddit posts for community discovery and competition
- ‚úÖ **Real-Time Competition**: Compete against other players with live leaderboard updates and personal best tracking

### Technical Implementation Status
- ‚úÖ **Frontend**: Complete TypeScript client with Minecraft-style UI, audio system, and WASM integration
- ‚úÖ **Backend**: Express server with Reddit API integration, Redis database, and world management endpoints
- ‚úÖ **Database**: Redis-backed world storage with 6 pre-loaded worlds and proper data validation
- ‚úÖ **Build System**: Vite-based build system with client/server separation and TypeScript project references
- ‚úÖ **Audio**: Web Audio API implementation with generative ambient music and contextual sound effects
- ‚úÖ **WASM Integration**: WebAssembly voxel engine with JavaScript bridge and memory management

The game provides a complete Minecraft-style world browsing experience with WebAssembly engine infrastructure, running natively within Reddit posts.

### Current Gameplay Experience

**What You Can Do Right Now:**
- **Speedrun 3D Voxel Worlds**: Navigate through challenging 3D voxel environments using bunny hopping mechanics to achieve the fastest completion times
- **Compete on Leaderboards**: Challenge current record holders including lizrd_demon (42.5s), TestPlayer123 (50.17s), borg23 (58.2s), and okpineapple12 (61.7s)
- **Master Movement Techniques**: Learn bunny hopping, strafe jumping, and air acceleration to optimize your speedrunning performance
- **Create Remix Worlds**: Use the remix system to create custom versions of worlds with your own titles and descriptions for community speedrunning
- **Track Personal Bests**: Automatic timing system tracks your fastest completion times and updates leaderboards when you achieve new records
- **Experience Authentic Interface**: Enjoy complete Minecraft-style aesthetics with pixelated rendering and authentic block textures
- **Share Community Challenges**: Remixed worlds automatically create new Reddit posts for other players to discover and speedrun

**The Experience:**
The game delivers a complete 3D voxel speedrunning experience with competitive bunny hopping mechanics. When you launch a world, the WebAssembly 3D engine initializes with real-time status updates, loading world data and leaderboard information for immediate speedrunning gameplay. Players use advanced movement techniques including strafe jumping and air acceleration to navigate through 3D voxel environments as quickly as possible, competing for the fastest completion times on community leaderboards. The remix system allows players to create custom versions of worlds with personalized titles and descriptions, sharing them as new speedrunning challenges for the Reddit community.

### What You Experience Right Now

**üé® Visual Experience:**
- Complete Minecraft-style interface with authentic block textures and pixelated rendering
- Stone-textured panels with block borders and authentic color schemes
- Dirt/grass background patterns with block grid overlays
- Responsive design that maintains block aesthetics across all devices

**üéµ Audio Experience:**
- Generative ambient music that evolves across multiple musical scales
- Interactive sound effects for every hover, click, and selection
- Procedural soundscapes with harmonic layering and frequency modulation
- Contextual audio feedback that enhances the block-world atmosphere

**üåç World Selection Experience:**
- Browse 6 unique voxel worlds with detailed descriptions and author information
- Interactive selection with visual feedback (bright green highlighting)
- Dynamic button updates that reflect your current world choice
- Validation system that prevents launching without proper selection

**‚ö° Engine Experience:**
- WebAssembly voxel engine initialization with real-time status updates
- Canvas display with Minecraft-style block frame and responsive sizing
- Automatic world data loading into the engine's virtual filesystem
- Foundation infrastructure ready for future voxel content and interactions

**Recent Update - Streamlined Data Loading:**
The engine now features simplified world data loading that:
- Directly fetches state.json from the server when needed
- Loads world data straight into the Emscripten virtual filesystem
- Eliminates complex persistence layers for faster, more reliable loading
- Provides immediate access to world data after engine initialization
- Simplifies the data flow for better performance and maintainability

### Future Development
- üîÑ **Advanced Movement Mechanics**: Enhanced bunny hopping physics with additional speedrunning techniques like wall-riding and momentum tricks
- üîÑ **Multiple Speedrun Worlds**: Expanded collection of unique voxel worlds each with different speedrunning challenges and optimal routes
- üîÑ **Tournament System**: Organized speedrunning competitions with brackets, prizes, and community events
- üîÑ **Replay System**: Record and share speedrun attempts with ghost data for comparing routes and techniques

---

## Summary

**BhopBlox** is a fully functional 3D voxel speedrunning game that runs natively within Reddit posts. The game currently provides:

- ‚úÖ **Competitive speedrunning gameplay** with bunny hopping mechanics and precision timing system
- ‚úÖ **Community leaderboards** with real-time competition and personal best tracking
- ‚úÖ **World remixing system** for creating custom speedrunning challenges with personalized titles and descriptions
- ‚úÖ **High-performance WebAssembly 3D engine** optimized for smooth speedrunning gameplay
- ‚úÖ **Advanced movement physics** including momentum conservation and air acceleration techniques
- ‚úÖ **Authentic Minecraft-style interface** with pixelated styling and responsive design
- ‚úÖ **Social integration** with automatic Reddit post creation for remixed worlds and community sharing
- ‚úÖ **Cross-platform support** optimized for both desktop precision and mobile accessibility

The game is currently in its **competitive speedrunning phase**, providing a complete bunny hopping experience with 3D voxel navigation, leaderboard competition, and community-driven content creation through the world remixing system.
